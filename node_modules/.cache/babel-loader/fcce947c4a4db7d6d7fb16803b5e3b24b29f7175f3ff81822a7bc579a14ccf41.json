{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jieli\\\\Desktop\\\\Coding\\\\Project\\\\MyBlog\\\\Frontend\\\\my-blog\\\\src\\\\Components\\\\FetchAPI.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport Login from \"./Login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"http://localhost:8080\";\nconst controller = new AbortController();\nexport const axObj = axios.create({\n  baseURL: BASE_URL,\n  signal: controller.signal\n});\nconst config = {\n  headers: {\n    Authorization: `Bearer ${localStorage.getItem('token') || \"\"}`,\n    \"Content-Type\": \"application/json\"\n  }\n};\naxObj.interceptors.request.use(config => {\n  // 在这里查看请求的所有信息\n  console.log(\"Request Config:\", config);\n\n  // 返回配置，以便请求继续发送\n  return config;\n}, error => {\n  // 请求错误时执行\n  console.error(\"Request Error:\", error);\n  return Promise.reject(error);\n});\n\n// // 响应拦截器：在响应被处理之前执行\n// axObj.interceptors.response.use(\n//   (response) => {\n//     // 在这里查看响应的所有信息\n//     console.log(\"Response Data:\", response.data);\n//     console.log(\"Response Status:\", response.status);\n//     console.log(\"Response Headers:\", response.headers);\n\n//     // 返回响应，以便继续处理\n//     return response;\n//   },\n//   (error) => {\n//     // 响应错误时执行\n//     console.error(\"Response Error:\", error);\n//     return Promise.reject(error);\n//   }\n// );\n\nexport const fetchArticleById = async ({\n  queryKey\n}) => {\n  const [_key, path] = queryKey;\n  const response = await axObj.get(path);\n  return response.data;\n};\nexport const fetchArticlesByLimit = async ({\n  queryKey\n}) => {\n  const [_key, fetchArticlesByLimitPath] = queryKey;\n  const response = await axObj.get(fetchArticlesByLimitPath);\n  return response.data;\n};\nexport const fetchArticlesNumber = async ({\n  queryKey\n}) => {\n  const [_key, path] = queryKey;\n  const response = await axObj.get(path);\n  return response.data;\n};\nexport const updateArticleById = async ({\n  newData\n}) => {\n  const {\n    path,\n    updateData\n  } = newData;\n  console.log(`http://localhost:8080${path}`);\n  console.log(updateData);\n  const response = await axObj.put(path, updateData);\n  return response.data;\n};\nexport const fetchTrendingArticlesByLimit = async ({\n  queryKey\n}) => {\n  const [_key, fetchArticlesByLimitPath] = queryKey;\n  const response = await axObj.get(fetchArticlesByLimitPath);\n  return response.data;\n};\nexport const fetchArticlesByContent = async ({\n  queryKey\n}) => {\n  const [_key, Path] = queryKey;\n  const response = await axObj.get(Path);\n  return response.data;\n};\nexport const fetchArticlesTitleByLimit = async ({\n  queryKey\n}) => {\n  const [_key, Path] = queryKey;\n  const response = await axObj.get(Path);\n  return response.data;\n};\nexport const fetchArticlesByAuthorId = async ({\n  queryKey\n}) => {\n  const [_key, data] = queryKey;\n  try {\n    const response = await axObj.get(data, config);\n    return response.data;\n  } catch (error) {\n    return {\n      redirectTo: '/home',\n      renderComponent: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 52\n      }, this)\n    };\n  }\n};\nexport const fetchUserById = async ({\n  queryKey\n}) => {\n  const [_key, data] = queryKey;\n  const response = await axObj.get(data);\n  return response.data;\n};\nexport const loginRequest = async data => {\n  const response = await axObj.post(\"/users/login\", data);\n  // localStorage.setItem('token',response.data);\n  return response;\n};\nexport const fetchUserByToken = async ({\n  queryKey\n}) => {\n  const [_key, path] = queryKey;\n  const response = await axObj.get(path, config);\n  return response.data;\n};\nexport const createNewArticle = async data => {\n  const response = await axObj.post(\"/users/login\", data);\n  return response;\n};","map":{"version":3,"names":["React","useState","axios","Login","jsxDEV","_jsxDEV","BASE_URL","controller","AbortController","axObj","create","baseURL","signal","config","headers","Authorization","localStorage","getItem","interceptors","request","use","console","log","error","Promise","reject","fetchArticleById","queryKey","_key","path","response","get","data","fetchArticlesByLimit","fetchArticlesByLimitPath","fetchArticlesNumber","updateArticleById","newData","updateData","put","fetchTrendingArticlesByLimit","fetchArticlesByContent","Path","fetchArticlesTitleByLimit","fetchArticlesByAuthorId","redirectTo","renderComponent","fileName","_jsxFileName","lineNumber","columnNumber","fetchUserById","loginRequest","post","fetchUserByToken","createNewArticle"],"sources":["C:/Users/jieli/Desktop/Coding/Project/MyBlog/Frontend/my-blog/src/Components/FetchAPI.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Login from \"./Login\";\r\n\r\nconst BASE_URL = \"http://localhost:8080\";\r\nconst controller = new AbortController();\r\nexport const axObj = axios.create({\r\n  baseURL: BASE_URL,\r\n  signal: controller.signal,\r\n});\r\n\r\nconst config = {\r\n  headers: {\r\n    Authorization: `Bearer ${localStorage.getItem('token') || \"\"}`,\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\naxObj.interceptors.request.use(\r\n  (config) => {\r\n    // 在这里查看请求的所有信息\r\n    console.log(\"Request Config:\", config);\r\n\r\n    // 返回配置，以便请求继续发送\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // 请求错误时执行\r\n    console.error(\"Request Error:\", error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// // 响应拦截器：在响应被处理之前执行\r\n// axObj.interceptors.response.use(\r\n//   (response) => {\r\n//     // 在这里查看响应的所有信息\r\n//     console.log(\"Response Data:\", response.data);\r\n//     console.log(\"Response Status:\", response.status);\r\n//     console.log(\"Response Headers:\", response.headers);\r\n\r\n//     // 返回响应，以便继续处理\r\n//     return response;\r\n//   },\r\n//   (error) => {\r\n//     // 响应错误时执行\r\n//     console.error(\"Response Error:\", error);\r\n//     return Promise.reject(error);\r\n//   }\r\n// );\r\n\r\nexport const fetchArticleById = async ({ queryKey }) => {\r\n  const [_key, path] = queryKey;\r\n  const response = await axObj.get(path);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchArticlesByLimit = async ({ queryKey }) => {\r\n  const [_key, fetchArticlesByLimitPath] = queryKey;\r\n  const response = await axObj.get(fetchArticlesByLimitPath);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchArticlesNumber = async ({ queryKey }) => {\r\n  const [_key, path] = queryKey;\r\n  const response = await axObj.get(path);\r\n  return response.data;\r\n};\r\n\r\nexport const updateArticleById = async ({ newData }) => {\r\n  const { path, updateData } = newData;\r\n  console.log(`http://localhost:8080${path}`);\r\n  console.log(updateData);\r\n  const response = await axObj.put(path, updateData);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchTrendingArticlesByLimit = async ({ queryKey }) => {\r\n  const [_key, fetchArticlesByLimitPath] = queryKey;\r\n  const response = await axObj.get(fetchArticlesByLimitPath);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchArticlesByContent = async ({ queryKey }) => {\r\n  const [_key, Path] = queryKey;\r\n  const response = await axObj.get(Path);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchArticlesTitleByLimit = async ({ queryKey }) => {\r\n  const [_key, Path] = queryKey;\r\n  const response = await axObj.get(Path);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchArticlesByAuthorId = async ({ queryKey }) => {\r\n  const [_key, data] = queryKey;\r\n  try {\r\n    const response = await axObj.get(data, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return { redirectTo: '/home', renderComponent: <Login /> };\r\n  }\r\n};\r\n\r\nexport const fetchUserById = async ({ queryKey }) => {\r\n  const [_key, data] = queryKey;\r\n  const response = await axObj.get(data);\r\n  return response.data;\r\n};\r\n\r\nexport const loginRequest = async (data) => {\r\n  const response = await axObj.post(\"/users/login\", data);\r\n  // localStorage.setItem('token',response.data);\r\n  return response;\r\n};\r\n\r\nexport const fetchUserByToken = async({queryKey}) =>{\r\n  const [_key, path] = queryKey;\r\n  const response = await axObj.get(path, config);\r\n  return response.data;\r\n}\r\n\r\nexport const createNewArticle = async(data) => {\r\n  const response = await axObj.post(\"/users/login\", data);\r\n  return response;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}